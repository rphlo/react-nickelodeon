(window["webpackJsonphumppakone-react"]=window["webpackJsonphumppakone-react"]||[]).push([[0],{1028:function(e,t,a){},1029:function(e,t,a){},1031:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),i=a.n(r),s=(a(278),a(103)),l=a.n(s),u=a(176),c=a(14),d=a(36),p=a(21),m=a(51),g=a(52),h=a(54),y=a(38),f=a(20),v=a.n(f),E=a(91),P=a.n(E),b=a(177),A=a.n(b),k=a(227),S=a.n(k);function M(e){var t=0,a=0,n=parseInt(e);n>60&&(t=parseInt(n/60),n=parseInt(n%60),t>60&&(a=parseInt(t/60),t=parseInt(t%60)));var o=function(e){return e>>0<10?"0".concat(e):e};return a>0?[o(a),o(t),o(n)].join(":"):[o(t),o(n)].join(":")}function O(e,t){return parseInt(Math.random()*(t-e+1)+e,10)}var N=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},L=function(){return"".concat(N()+N(),"-").concat(N(),"-").concat(N(),"-").concat(N(),"-").concat(N()).concat(N()).concat(N())},w="react-jinke-music-player-mobile",T=function(e){var t=e.visible,a=e.title,n=e.text;return o.a.createElement("div",{className:v()("".concat(w,"-play-model-tip"),{show:t})},o.a.createElement("span",{className:"title"},a),o.a.createElement("span",{className:"text"},n))},j=function(e){var t=e.name,a=e.cover,r=e.singer,i=e.playing,s=e.duration,l=e.currentTime,u=e.loading,c=e.loadingIcon,d=e.themeSwitch,p=e.progressBar,m=(e.openAudioListsPanel,e.audioPrevPlay,e.audioNextPlay),g=(e.prevAudioIcon,e.nextAudioIcon),h=e.playIcon,y=e.pauseIcon,f=e.playMode,E=e.downloadIcon,P=e.reloadIcon,b=(e.playListsIcon,e.closeIcon,e.onClose,e.pause),A=e.playModeTipVisible,k=e.currentPlayModeName,S=e.extendsContent,M=e.onPlay,O=e.glassBg,N=e.LyricComponent;return o.a.createElement("div",{className:v()(w,{"default-bg":!O,"glass-bg":O})},o.a.createElement(T,{visible:A,title:f,text:k}),o.a.createElement("div",{className:"".concat(w,"-header group")},o.a.createElement("div",{className:"left item"}),o.a.createElement("div",{className:"title",key:"audio-title"},t)),o.a.createElement("div",{className:"".concat(w,"-singer text-center group")},o.a.createElement("span",{className:"name",key:"singer-name"},r)),o.a.createElement("div",{className:"".concat(w,"-switch text-center group")},d),o.a.createElement("div",{className:"".concat(w,"-cover text-center")},o.a.createElement("img",{src:a,alt:"cover",key:"cover",className:v()("cover",{"img-rotate-pause":b||!i||!a})})),o.a.createElement("div",{className:"".concat(w,"-progress group")},o.a.createElement("span",{key:"current-time",className:"current-time"},u?"--":l),p,o.a.createElement("span",{key:"duration",className:"duration text-right"},u?"--":s)),o.a.createElement("div",{className:"".concat(w,"-toggle text-center group")},u?c:o.a.createElement(n.Fragment,null,o.a.createElement("span",{className:"group prev-audio",key:"prev-audio"}),o.a.createElement("span",{className:"group play-btn",title:i?"Click to pause":"Click to play",key:"play-btn",onClick:M},i?y:h),o.a.createElement("span",{className:"group next-audio",title:"Next track",key:"next-audio",onClick:m},g))),o.a.createElement("div",{className:"".concat(w,"-operation group")},o.a.createElement("ul",{className:"items"},o.a.createElement("li",{className:"item",key:"item-player-mode"},f),o.a.createElement("li",{className:"item",key:"item-download-icon"},E),o.a.createElement("li",{className:"item",key:"item-reload-icon"},P),S&&S.length>=1?S.map(function(e,t){return o.a.createElement("li",{className:"item",key:t},e)}):void 0,o.a.createElement("li",{className:"item"},N))))},I=a(228),x=a.n(I),C=a(164),_=a.n(C),D=a(165),R=a.n(D),V=a(166),B=a.n(V),Y=a(167),F=a.n(Y),H=a(168),W=a.n(H),U=a(229),z=a.n(U),K=a(230),G=a.n(K),X=a(169),J=a.n(X),$=a(170),Z=a.n($),q=a(178),Q=a.n(q),ee=a(179),te=a.n(ee),ae=a(180),ne=a.n(ae),oe=a(104),re=a.n(oe),ie=a(231),se=a.n(ie),le=a(181),ue=a.n(le),ce=a(232),de=a.n(ce),pe=a(233),me=a.n(pe);a(342),a(343);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function he(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ye=P()(),fe=function(){return o.a.createElement(B.a,{className:"react-jinke-music-player-play-icon"})},ve=function(){return o.a.createElement(F.a,{className:"react-jinke-music-player-pause-icon"})},Ee=function(){return o.a.createElement("span",{className:"loading group",key:"loading"},o.a.createElement(Z.a,null))},Pe=function(e){var t=e.visible,a=e.value;return o.a.createElement("div",{className:v()("play-mode-title",{"play-mode-title-visible":t}),key:"play-mode-title"},a)},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.progress,a=void 0===t?0:t,n=e.r,r=void 0===n?40:n,i=a.toFixed(2),s=2*Math.PI*r,l="".concat(~~(s*i)," ").concat(~~(s*(1-i)));return o.a.createElement("svg",{className:"audio-circle-process-bar"},o.a.createElement("circle",{cx:r,cy:r,r:r-1,fill:"none",className:"stroke",strokeDasharray:l}),o.a.createElement("circle",{cx:r,cy:r,r:r-1,fill:"none",className:"bg",strokeDasharray:"0 1000"}))},Ae={min:0,step:.01,trackStyle:{backgroundColor:"#000000"},handleStyle:{backgroundColor:"#000000",border:"2px solid #fff"}},ke=function(e){function t(e){var a;Object(d.a)(this,t),(a=Object(m.a)(this,Object(g.a)(t).call(this,e))).initPlayId="",a.audioListRemoveAnimateTime=350,a.NETWORK_STATE={NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3},a.READY_SUCCESS_STATE=4,a.state={currentAudio:{},playId:a.initPlayId,name:"",cover:"",singer:"",musicSrc:"",currentLyric:"",isMobile:ye,toggle:!1,pause:!0,playing:!1,duration:0,currentTime:0,isLoop:!1,isMute:!1,soundValue:100,isDrag:!1,currentX:0,currentY:0,moveX:0,moveY:0,isMove:!1,loading:!1,audioListsPanelVisible:!1,playModelNameVisible:!1,theme:a.darkThemeName,extendsContent:[],playMode:"",currentAudioVolume:0,initAnimate:!1,isInitAutoplay:!1,isInitRemember:!1,loadProgress:0,removeId:-1,isNeedMobileHack:ye,audioLyricVisible:!1},a.togglePlayMode=function(){var e=a._PLAY_MODE_.findIndex(function(e){return e.key===a.state.playMode}),t=e===a._PLAY_MODE_LENGTH_-1?a._PLAY_MODE_[0].key:a._PLAY_MODE_[++e].key;a.setState({playMode:t,playModelNameVisible:!0,playModeTipVisible:!0}),a.props.onPlayModeChange&&a.props.onPlayModeChange(a.PLAY_MODE[t]),clearTimeout(a.playModelTimer),a.playModelTimer=setTimeout(function(){a.setState({playModelNameVisible:!1,playModeTipVisible:!1})},a.props.playModeShowTime)},a.renderPlayModeIcon=function(e){var t="",n="react-jinke-music-player-mode-icon";switch(e){case a.PLAY_MODE.order.key:t=o.a.createElement(re.a,{className:n});break;case a.PLAY_MODE.orderLoop.key:t=o.a.createElement(te.a,{className:n});break;case a.PLAY_MODE.singleLoop.key:t=o.a.createElement(Q.a,{className:n});break;case a.PLAY_MODE.shufflePlay.key:t=o.a.createElement(ne.a,{className:n});break;default:t=o.a.createElement(re.a,{className:n})}return t},a.audioListsPlay=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.state,o=n.playId,r=n.pause,i=n.playing,s=n.currentAudio;if(s==={})return console.warn("Your playlist has no songs. and cannot play !");if(e===o&&!t)return a.setState({pause:!r,playing:!i}),r?a.audio.play():a._pauseAudio();var l=s.id===e?s:{},u=l.name,c=l.cover,d=l.musicSrc,p=l.singer,m=function(t){a.setState({name:u,cover:c,musicSrc:t,singer:p,playId:e,currentTime:0,duration:0,playing:!1,loading:!0,loadProgress:0},function(){a.audio.load()}),a.props.onAudioPlayTrackChange&&a.props.onAudioPlayTrackChange(e,[s],a.getBaseAudioInfo())};switch(typeof d){case"function":d().then(function(e){m(e)},a.onAudioLoadError);break;default:m(d)}},a.resetAudioStatus=function(){a.audio.pause(),a.setState({currentTime:0,duration:0,loading:!1,playing:!1,pause:!0}),a.initPlayInfo([])},a.deleteAudioLists=function(e){return function(t){t.stopPropagation();var n=a.state,o=n.playId,r=[n.currentAudio].filter(function(t){return t.id!==e});e?(a.setState({removeId:e}),setTimeout(function(){a.setState({removeId:-1},function(){if(r.length<=0)return a.resetAudioStatus();e===o&&a.handlePlay(a.PLAY_MODE.orderLoop.key)})},a.audioListRemoveAnimateTime)):a.resetAudioStatus(),a.props.onAudioListsChange&&a.props.onAudioListsChange(o,r,a.getBaseAudioInfo())}},a.openAudioListsPanel=function(){a.setState(function(e){var t=e.audioListsPanelVisible;e.initAnimate;return{initAnimate:!0,audioListsPanelVisible:!t}}),a.props.onAudioListsPanelChange&&a.props.onAudioListsPanelChange(!a.state.audioListsPanelVisible)},a.closeAudioListsPanel=function(e){e.stopPropagation(),a.setState({audioListsPanelVisible:!1}),a.props.onAudioListsPanelChange&&a.props.onAudioListsPanelChange(!1)},a.themeChange=function(e){var t=e?a.lightThemeName:a.darkThemeName;a.setState({theme:t}),a.props.onThemeChange&&a.props.onThemeChange(t)},a.onAudioDownload=function(){var e=a.state,t=e.name,n=e.musicSrc;t&&n&&(a.downloadNode=document.createElement("a"),a.downloadNode.setAttribute("download",t),a.downloadNode.setAttribute("name",t),a.downloadNode.setAttribute("href",n),a.downloadNode.click(),a.props.onAudioDownload&&a.props.onAudioDownload(a.getBaseAudioInfo()))},a.controllerMouseMove=function(e,t){var n=t.deltaX,o=t.deltaY,r=Math.abs(n)>=a.openPanelPeriphery||Math.abs(o)>=a.openPanelPeriphery;a.setState({isMove:r})},a.controllerMouseUp=function(e,t){var n=t.x,o=t.y;return a.state.isMove||(a.state.isNeedMobileHack&&(a.loadAndPlayAudio(),a.setState({isNeedMobileHack:!1})),a.openPanel()),a.setState({moveX:n,moveY:o}),!1},a.controllerMouseOut=function(e){e.preventDefault(),a.isDrag=!1},a.onHandleProgress=function(e){a.audio.currentTime=e},a.onSound=function(){a.setAudioVolume(a.state.currentAudioVolume)},a.setAudioVolume=function(e){a.audio.volume=e,a.setState({currentAudioVolume:e,soundValue:e})},a.stopAll=function(e){e.stopPropagation(),e.preventDefault()},a.getBoundingClientRect=function(e){var t=e.getBoundingClientRect();return{left:t.left,top:t.top}},a.audioLoop=function(){a.setState(function(e){return{isLoop:!e.isLoop}})},a.onAudioReload=function(){a.handlePlay(a.PLAY_MODE.singleLoop.key),a.props.onAudioReload&&a.props.onAudioReload(a.getBaseAudioInfo())},a.openPanel=function(){a.props.toggleMode&&(a.setState({toggle:!0}),a.props.onModeChange&&a.props.onModeChange(a.toggleModeName.full))},a.onHidePanel=function(e){a.setState({toggle:!1,audioListsPanelVisible:!1}),a.props.onModeChange&&a.props.onModeChange(a.toggleModeName.mini)},a.onPlay=function(){a.state.playing?a._pauseAudio():(a.loadAndPlayAudio(),a.props.onAudioPlay&&a.props.onAudioPlay(a.getBaseAudioInfo()))},a.canPlay=function(){a.setAudioLength(),a.loadAndPlayAudio(),a.setState({loading:!1,playing:a.props.autoPlay})},a._pauseAudio=function(){a.audio.pause(),a.setState({playing:!1,pause:!0})},a.onPauseAudio=function(){a.props.onAudioPause&&a.props.onAudioPause(a.getBaseAudioInfo())},a.loadAndPlayAudio=function(){var e=a.props,t=e.autoPlay,n=e.remember,o=a.state,r=o.isInitAutoplay,i=o.isInitRemember,s=o.loadProgress,l=a.audio.networkState;if(a.setState({loading:!0}),s<100&&a.setState({loadProgress:s+1}),l!==a.NETWORK_STATE.NETWORK_NO_SOURCE){var u=a.getLastPlayStatus().pause,c=n&&!i&&u,d=r||!0===t;a.setState({playing:n?!c:d,loading:!1,pause:n?c:!d,loadProgress:100},function(){(n?!c:d)&&a.audio.play(),a.setState({isInitAutoplay:!0,isInitRemember:!0})})}else a.onAudioLoadError()},a.setAudioLength=function(){a.setState({duration:a.audio.duration})},a.onAudioLoadError=function(e){var t=a.state,n=t.playMode,o=t.playId;a.props.loadAudioErrorPlayNext&&o<0&&a.handlePlay(n);var r=a.getBaseAudioInfo();a.props.onAudioLoadError&&a.props.onAudioLoadError(he({},e,{audioInfo:r,errMsg:a.audio.error||null}))},a.handlePlay=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=a.state,r=n.playId,i=n.currentAudio,s=[i],l=1,u=s.findIndex(function(e){return e.id===r});switch(e){case a.PLAY_MODE.order.key:if(o.a.createElement(re.a,null),u===l-1)return a._pauseAudio();a.audioListsPlay(t?s[u+1].id:s[u-1].id);break;case a.PLAY_MODE.orderLoop.key:if(o.a.createElement(te.a,null),t){if(u===l-1)return a.audioListsPlay(s[0].id);a.audioListsPlay(s[u+1].id)}else{if(0===u)return a.audioListsPlay(s[l-1].id);a.audioListsPlay(s[u-1].id)}break;case a.PLAY_MODE.singleLoop.key:o.a.createElement(Q.a,null),a.audio.currentTime=0,a.audioListsPlay(r,!0);break;case a.PLAY_MODE.shufflePlay.key:o.a.createElement(ne.a,null);var c=O(0,l-1),d=(s[c]||{}).id;a.audioListsPlay(d,!0);break;default:o.a.createElement(re.a,null)}},a.audioEnd=function(){a.props.onAudioEnded&&a.props.onAudioEnded(a.getBaseAudioInfo()),a.handlePlay(a.state.playMode)},a.audioPrevAndNextBasePlayHandle=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];a.props.audioPrevAndNextBasePlayHandle(e),a.handlePlay(a.PLAY_MODE.shufflePlay.key,e)},a.audioPrevPlay=function(){a.audioPrevAndNextBasePlayHandle(!1)},a.audioNextPlay=function(){a.audioPrevAndNextBasePlayHandle(!0)},a.audioTimeUpdate=function(){var e=a.audio.currentTime;a.setState({currentTime:e}),a.props.remember&&a.saveLastPlayStatus(),a.props.onAudioProgress&&a.props.onAudioProgress(a.getBaseAudioInfo())},a.audioSoundChange=function(e){a.setAudioVolume(e)},a.onAudioVolumeChange=function(){a.setState({isMute:a.audio.volume<=0}),a.props.onAudioVolumeChange&&a.props.onAudioVolumeChange(a.audio.volume)},a.onAudioPlay=function(){a.setState({playing:!0,loading:!1}),a.props.onAudioPlay&&a.props.onAudioPlay(a.getBaseAudioInfo())},a.onAudioSeeked=function(){a.state.playing&&(a.loadAndPlayAudio(),setTimeout(function(){a.setState({playing:!0})})),a.props.onAudioSeeked&&a.props.onAudioSeeked(a.getBaseAudioInfo())},a.onMute=function(){a.setState({isMute:!0,soundValue:0,currentAudioVolume:a.audio.volume},function(){a.audio.volume=0})},a.onAudioAbort=function(e){var t=a.getBaseAudioInfo(),n=Object.assign({},e,t);a.props.onAudioAbort&&a.props.onAudioAbort(n),a.audio.pause(),a.audio.play()},a.toggleMode=function(e){e===a.toggleModeName.full&&a.setState({toggle:!0})},a.audioListsDragEnd=function(e,t){var n=a.state,o=n.playId,r=[n.currentAudio],i=r.splice(e,1)[0];r.splice(t,0,i);var s=e===o?t:o;a.setState({audioLists:r,playId:s}),a.props.onAudioListsDragEnd&&a.props.onAudioListsDragEnd(e,t),a.props.onAudioListsChange&&a.props.onAudioListsChange(s,r,a.getBaseAudioInfo())},a.saveLastPlayStatus=function(){var e=a.state,t=e.currentTime,n=e.playId,o=e.duration,r=e.theme,i=e.soundValue,s=e.playMode,l=e.name,u=e.cover,c=e.singer,d=e.musicSrc,p=e.pause,m=JSON.stringify({currentTime:t,playId:n,duration:o,theme:r,playMode:s,soundValue:i,name:l,cover:u,singer:c,musicSrc:d,pause:p});localStorage.setItem("lastPlayStatus",m)},a.getLastPlayStatus=function(){var e=a.props,t=e.theme,n=e.defaultPlayMode,o=(e.defaultPlayIndex,{currentTime:0,duration:0,playMode:n,name:"",cover:"",singer:"",musicSrc:"",playId:a.getDefaultPlayId(),theme:t,pause:!1});try{return JSON.parse(localStorage.getItem("lastPlayStatus"))||o}catch(r){return o}},a.mockAutoPlayForMobile=function(){a.props.autoPlay&&!a.state.playing&&a.state.pause&&(a.audio.load(),a.audio.pause(),a.audio.play())},a.bindMobileAutoPlayEvents=function(){document.addEventListener("touchstart",function(){a.mockAutoPlayForMobile()},{once:!0}),document.addEventListener("WeixinJSBridgeReady",function(){a.mockAutoPlayForMobile()})},a.bindSafariAutoPlayEvents=function(){document.addEventListener("click",function(){a.mockAutoPlayForMobile()},{once:!0})},a.unBindEvents=function(){var e;(e=a).bindEvents.apply(e,arguments)},a.bindEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.audio,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{waiting:a.loadAndPlayAudio,canplay:a.canPlay,error:a.onAudioLoadError,ended:a.audioEnd,seeked:a.onAudioSeeked,pause:a.onPauseAudio,play:a.onAudioPlay,timeupdate:a.audioTimeUpdate,volumechange:a.onAudioVolumeChange,stalled:a.onAudioLoadError,abort:a.onAudioAbort},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=a.props.once;for(var r in t){var i=t[r];n?e.addEventListener(r,i,{once:!(!o||"play"!==r)}):e.removeEventListener(r,i)}},a.getPlayInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter(function(e){return!e.id}),n=e.filter(function(e){return e.id}),o=[].concat(Object(y.a)(n),Object(y.a)(t.map(function(e){return he({},e,{id:L()})})));console.log("// // ",o,e);var r=0,i=a.state.playId||o[r].id,s=o.find(function(e){return e.id===i})||{},l=s.name,u=void 0===l?"":l,c=s.cover,d=void 0===c?"":c,p=s.singer,m=void 0===p?"":p,g=s.musicSrc,h=void 0===g?"":g;return{name:u,cover:d,singer:m,musicSrc:h,currentAudio:o.pop(),playId:i}},a.initPlayInfo=function(e,t){var n=a.getPlayInfo(e);switch(typeof n.musicSrc){case"function":n.musicSrc().then(function(e){a.setState(he({},n,{musicSrc:e}),t)},a.onAudioLoadError);break;default:a.setState(n,t)}},a.listenerIsMobile=function(e){var t=e.matches;a.setState({isMobile:!!t})},a.addMobileListener=function(){a.media=window.matchMedia("(max-width: 768px) and (orientation : portrait)"),a.media.addListener(a.listenerIsMobile)},a.setDefaultAudioVolume=function(){var e=a.props,t=e.defaultVolume,n=e.remember;a.defaultVolume=Math.max(0,Math.min(t,100))/100;var o=a.getLastPlayStatus().soundValue,r=void 0===o?a.defaultVolume:o;a.setAudioVolume(n?r:a.defaultVolume)},a.getDefaultPlayId=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[a.props.currentAudio],t=Math.max(0,Math.min(e.length,a.props.defaultPlayIndex));return 0===e.length?L():e[t].id},a.audio=null,a.lightThemeName="light",a.darkThemeName="dark",a.toggleModeName={full:"full",mini:"mini"},a.targetId="music-player-controller",a.openPanelPeriphery=1,a.x=0,a.y=0,a.isDrag=!1;var n=e.playModeText,r=n.order,i=n.orderLoop,s=n.singleLoop,l=n.shufflePlay;return a.PLAY_MODE={order:{key:"order",value:r},orderLoop:{key:"orderLoop",value:i},singleLoop:{key:"singleLoop",value:s},shufflePlay:{key:"shufflePlay",value:l}},a._PLAY_MODE_=Object.values(a.PLAY_MODE),a._PLAY_MODE_LENGTH_=a._PLAY_MODE_.length,a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.className,r=t.controllerTitle,i=t.closeText,s=t.openText,l=t.drag,u=t.style,d=t.showDownload,p=t.showPlay,m=t.showReload,g=t.showPlayMode,h=t.showThemeSwitch,y=t.checkedText,f=t.unCheckedText,E=t.toggleMode,P=t.showMiniModeCover,b=t.extendsContent,k=t.defaultPlayMode,O=t.seeked,N=t.showProgressLoadBar,L=t.bounds,w=t.defaultPosition,T=t.showMiniProcessBar,I=t.preload,C=t.glassBg,_=this.state,D=_.toggle,V=_.playing,B=_.duration,Y=_.currentTime,F=_.isMute,H=_.soundValue,U=_.moveX,K=_.moveY,X=_.loading,$=_.pause,Z=_.theme,q=_.name,Q=_.cover,ee=_.singer,te=_.musicSrc,ae=_.isMobile,ne=_.playMode,oe=_.playModeTipVisible,re=_.playModelNameVisible,ie=_.loadProgress,le=!1===I||"none"===I?{}:!0===I?{preload:"auto"}:{preload:I},ce=this.PLAY_MODE[ne||k],pe=ce.key,ge=ce.value,he=P?{style:{backgroundImage:"url(".concat(Q,")")}}:{},ke=M(Y),Se=M(B),Me=O?{onChange:this.onHandleProgress,onAfterChange:this.onAudioSeeked}:{},Oe=o.a.createElement(A.a,Object.assign({max:Math.ceil(B),defaultValue:0,value:Y},Me,Ae)),Ne=d?o.a.createElement("span",Object.assign({className:"group audio-download"},Object(c.a)({},ye?"onTouchStart":"onClick",this.onAudioDownload)),o.a.createElement(J.a,null)):void 0,Le=h?o.a.createElement("span",{className:"group theme-switch"},o.a.createElement(S.a,{className:"theme-switch-container",onChange:this.themeChange,checkedChildren:y,unCheckedChildren:f,checked:Z===this.lightThemeName})):void 0,we=m?o.a.createElement("span",Object.assign({className:"group reload-btn"},ye?{onTouchStart:this.onAudioReload}:{onClick:this.onAudioReload},{key:"reload-btn",title:"Reload"}),o.a.createElement(W.a,null)):void 0,Te=g?o.a.createElement("span",Object.assign({className:v()("group loop-btn")},ye?{onTouchStart:this.togglePlayMode}:{onClick:this.togglePlayMode},{key:"play-mode-btn",title:this.PLAY_MODE[pe].value}),this.renderPlayModeIcon(pe)):void 0,je=ae?30:40,Ie=o.a.createElement("div",{className:v()("react-jinke-music-player"),key:"react-jinke-music-player",style:w},o.a.createElement("div",{className:v()("music-player"),key:"music-player"},T?o.a.createElement(be,{progress:Y/B,r:je}):void 0,o.a.createElement("div",Object.assign({key:"controller",id:this.targetId,className:v()("scale","music-player-controller",{"music-player-playing":this.state.playing})},he),X?o.a.createElement(Ee,null):o.a.createElement(n.Fragment,null,o.a.createElement("span",{className:"controller-title",key:"controller-title"},r),o.a.createElement("div",{key:"setting",className:"music-player-controller-setting"},D?i:s)))));return o.a.createElement("div",{className:v()("react-jinke-music-player-main",{"light-theme":Z===this.lightThemeName,"dark-theme":Z===this.darkThemeName},a),style:u},D&&ae?o.a.createElement(j,{playing:V,loading:X,pause:$,name:q,singer:ee,cover:Q,themeSwitch:Le,duration:Se,currentTime:ke,progressBar:Oe,onPlay:this.onPlay,currentPlayModeName:this.PLAY_MODE[pe].value,playMode:Te,audioNextPlay:this.audioNextPlay,audioPrevPlay:this.audioPrevPlay,playListsIcon:o.a.createElement(se.a,null),reloadIcon:we,downloadIcon:Ne,nextAudioIcon:o.a.createElement(ue.a,null),prevAudioIcon:o.a.createElement(de.a,null),playIcon:o.a.createElement(fe,null),pauseIcon:o.a.createElement(ve,null),closeIcon:o.a.createElement(me.a,null),loadingIcon:o.a.createElement(Ee,null),playModeTipVisible:oe,openAudioListsPanel:this.openAudioListsPanel,onClose:this.onHidePanel,extendsContent:b,glassBg:C}):void 0,D?void 0:l?o.a.createElement(x.a,{bounds:L,position:{x:U,y:K},onDrag:this.controllerMouseMove,onStop:this.controllerMouseUp,onStart:this.controllerMouseMove},Ie):o.a.createElement(n.Fragment,null,Ie),D?ae?void 0:o.a.createElement("div",{key:"panel",className:v()("music-player-panel","translate",{"glass-bg":C})},o.a.createElement("section",{className:"panel-content",key:"panel-content"},o.a.createElement("div",{className:v()("img-content","img-rotate",{"img-rotate-pause":$||!V||!Q}),style:{backgroundImage:"url(".concat(Q,")")},key:"img-content"}),o.a.createElement("div",{className:"progress-bar-content",key:"progress-bar-content"},o.a.createElement("span",{className:"audio-title",title:ee},q||""),o.a.createElement("section",{className:"audio-main"},o.a.createElement("span",{key:"current-time",className:"current-time"},X?"--":ke),o.a.createElement("div",{className:"progress-bar",key:"progress-bar"},N?o.a.createElement("div",{className:"progress-load-bar",key:"progress-load-bar",style:{width:"".concat(Math.min(ie,100),"%")}}):void 0,Oe),o.a.createElement("span",{key:"duration",className:"duration"},X?"--":Se))),o.a.createElement("div",{className:"player-content",key:"player-content"},X?o.a.createElement("span",null,o.a.createElement(Ee,null)):p?o.a.createElement("span",{className:"group"},o.a.createElement("span",Object.assign({className:"group play-btn",key:"play-btn",ref:function(t){return e.playBtn=t}},ye?{onTouchStart:this.onPlay}:{onClick:this.onPlay},{title:V?"Click to pause":"Click to play"}),V?o.a.createElement("span",null,o.a.createElement(ve,null)):o.a.createElement("span",null,o.a.createElement(fe,null))),o.a.createElement("span",Object.assign({className:"group next-audio",title:"Next track"},ye?{onTouchStart:this.audioNextPlay}:{onClick:this.audioNextPlay}),o.a.createElement(ue.a,null))):void 0,we,Ne,Le,b&&b.length>=1?b.map(function(e,t){return e}):void 0,o.a.createElement("span",{className:"group play-sounds",key:"play-sound",title:"Volume"},F?o.a.createElement("span",Object.assign({className:"sounds-icon"},ye?{onTouchStart:this.onSound}:{onClick:this.onSound}),o.a.createElement(G.a,null)):o.a.createElement("span",Object.assign({className:"sounds-icon"},ye?{onTouchStart:this.onMute}:{onClick:this.onMute}),o.a.createElement(z.a,null)),o.a.createElement(A.a,Object.assign({max:1,value:H,onChange:this.audioSoundChange,className:"sound-operation"},Ae))),Te,E?o.a.createElement("span",Object.assign({className:"group hide-panel",key:"hide-panel-btn"},ye?{onTouchStart:this.onHidePanel}:{onClick:this.onHidePanel}),o.a.createElement(R.a,null)):void 0)),o.a.createElement(Pe,{visible:re,value:ge})):void 0,o.a.createElement("audio",Object.assign({key:"audio",className:"music-player-audio"},le,{src:te,ref:function(t){return e.audio=t}})))}},{key:"getBaseAudioInfo",value:function(){var e=this.state,t=e.cover,a=e.name,n=e.musicSrc,o=e.soundValue,r=this.audio;return{cover:t,name:a,musicSrc:n,volume:o,currentTime:r.currentTime,duration:r.duration,muted:r.muted,networkState:r.networkState,readyState:r.readyState,played:r.played,paused:r.paused,ended:r.ended,startDate:r.startDate}}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.currentAudio,n=e.playIndex;if(a!==this.props.currentAudio){var o=[this.state.currentAudio].concat(Object(y.a)([a].filter(function(e,a){return-1===[t.state.currentAudio].findIndex(function(t){return t.musicSrc===e.musicSrc})})));this.initPlayInfo(o),this.bindEvents(this.audio),this.props.onAudioListsChange&&this.props.onAudioListsChange(this.state.playId,[a],this.getBaseAudioInfo())}else{if([this.state.currentAudio].findIndex(function(e){return e.id===t.state.playId})!==n){var r=this.state.currentAudio;r&&r.id&&this.audioListsPlay(r.id,!0)}}}},{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.mode,n=t.currentAudio,o=t.defaultPlayMode,r=t.remember,i=t.theme,s=t.defaultPlayIndex;this.toggleMode(a);var l=this.getPlayInfo([n]),u=r?this.getLastPlayStatus(s):{playMode:o,theme:i};switch(typeof l.musicSrc){case"function":l.musicSrc().then(function(t){e.setState(he({},l,{musicSrc:t},u))},this.onAudioLoadError);break;default:this.setState(he({},l,{},u))}}},{key:"componentWillUnmount",value:function(){this.unBindEvents(this.audio,void 0,!1),this.media.removeListener(this.listenerIsMobile),this.media=void 0}},{key:"componentDidMount",value:function(){this.addMobileListener(),this.setDefaultAudioVolume(),this.bindEvents(this.audio),ye&&this.bindMobileAutoPlayEvents(),ye||!/Safari/.test(navigator.userAgent)||/Chrome/.test(navigator.userAgent)||this.bindSafariAutoPlayEvents()}}]),t}(n.PureComponent);ke.defaultProps={currentAudio:{},theme:"dark",mode:"mini",playModeText:{order:"order",orderLoop:"orderLoop",singleLoop:"singleLoop",shufflePlay:"shufflePlay"},defaultPlayMode:"order",defaultPosition:{left:0,top:0},controllerTitle:o.a.createElement(_.a,null),panelTitle:"PlayList",closeText:"close",openText:"open",notContentText:"no music",checkedText:"",unCheckedText:"",once:!1,drag:!0,toggleMode:!0,showMiniModeCover:!0,showDownload:!0,showPlay:!0,showReload:!0,showPlayMode:!0,showThemeSwitch:!0,showLyric:!1,playModeTipVisible:!1,autoPlay:!0,defaultVolume:100,showProgressLoadBar:!0,seeked:!0,playModeShowTime:600,bounds:"body",showMiniProcessBar:!1,loadAudioErrorPlayNext:!0,preload:!1,glassBg:!1,remember:!1,remove:!0,defaultPlayIndex:0,emptyLyricPlaceholder:"NO LYRIC"};var Se=a(105),Me=a.n(Se),Oe=a(78),Ne=a(72),Le=a.n(Ne),we=a(234),Te=a.n(we),je=(a(1028),a(1029),a(244)),Ie=a.n(je),xe=a(254),Ce=a.n(xe),_e=a(245),De=a.n(_e),Re=a(252),Ve=a.n(Re),Be=a(185),Ye=a.n(Be),Fe=a(184),He=a.n(Fe),We=a(246),Ue=a.n(We),ze=a(247),Ke=a.n(ze),Ge=a(249),Xe=a.n(Ge),Je=a(250),$e=a.n(Je),Ze=a(251),qe=a.n(Ze),Qe=a(255),et=a.n(Qe),tt=a(248),at=a.n(tt),nt=a(253),ot=a.n(nt),rt=a(256),it=a.n(rt);function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?st(a,!0).forEach(function(t){Object(c.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ut={Add:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ie.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return o.a.createElement(De.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return o.a.createElement(He.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ue.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ye.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ke.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return o.a.createElement(at.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return o.a.createElement(Xe.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return o.a.createElement($e.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return o.a.createElement(qe.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ye.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ve.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return o.a.createElement(He.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return o.a.createElement(ot.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return o.a.createElement(Ce.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return o.a.createElement(et.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return o.a.createElement(it.a,Object.assign({},e,{ref:t}))})},ct={currentAudio:{musicSrc:""},defaultPlayIndex:0,playIndex:0,theme:"light",bounds:"body",preload:!0,glassBg:!0,remember:!1,remove:!1,openText:"open",closeText:"close",checkedText:"-",unCheckedText:"+",notContentText:"no music",panelTitle:"humppakone.com",defaultPlayMode:"order",mode:"full",once:!0,autoPlay:!1,toggleMode:!1,showMiniModeCover:!0,showMiniProcessBar:!0,drag:!1,seeked:!0,controllerTitle:o.a.createElement(Oe.FaHeadphones,null),showProgressLoadBar:!0,showPlay:!0,showReload:!0,showDownload:!0,showPlayMode:!1,showThemeSwitch:!1,extendsContent:[],defaultVolume:100,playModeShowTime:600,loadAudioErrorPlayNext:!0,apiRoot:localStorage.devserver||"https://api.humppakone.com",authToken:localStorage.getItem("auth_token"),xhrRand:[],fetchingNext:!1,showSearchModal:!1},dt=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(g.a)(t).call(this))).state={params:ct},e.onLogin=function(t){t.preventDefault();var a=Le()("#username").val(),n=Le()("#password").val();Le.a.ajax({url:e.state.params.apiRoot+"/login/",data:{username:a,password:n},dataType:"json",method:"POST"}).done(e.onLoginSuccess).fail(e.onLoginFail)},e.onLoginSuccess=function(t){var a=lt({},e.state.params,{authToken:t.token});e.setState({params:a}),localStorage.setItem("auth_token",t.token),console.log("Login successful"),e.fetchRandomSong()},e.onLoginFail=function(){Me()("Login Error")},e.fetchRandomSong=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Le.a.ajax({url:e.state.params.apiRoot+"/songs/random?t="+ +new Date,method:"GET",dataType:"json",headers:{Authorization:"Token "+e.state.params.authToken}}).done(function(a){return e.onRandomSongLoaded(a,t)}).fail(e.onAjaxFail),n=e.state.params.xhrRand;n.push(a);var o=n.filter(function(e){return 4!==e.readyState}),r=lt({},e.state.params,{xhrRand:o,fetchingNext:!0});e.setState({params:r})},e.onfetchingError=function(t){var a=lt({},e.state.params,{fetchingNext:!1});e.setState({params:a}),e.onAjaxFail(t)},e.clearAuthToken=function(){var t=lt({},e.state.params,{authToken:null});localStorage.setItem("auth_token",""),e.setState({params:t})},e.onLogout=function(t){t.preventDefault(),e.clearAuthToken(),Le.a.ajax({url:e.state.params.apiRoot+"/logout/",method:"POST",headers:{Authorization:"Token "+e.state.params.authToken}}).done(function(e){return console.log("Logged out, token removed")})},e.onYoutubeDlPrompt=Object(u.a)(l.a.mark(function t(){var a,n,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Me()("Youtube URL:",{content:"input"});case 2:if(a=t.sent,console.log(a),n=null,o=[{pos:1,re:/^([a-zA-Z0-9_-]{11})$/},{pos:4,re:/^(https?:\/\/)?(www\.|m\.)?youtube\.com\/watch\?(.*&)?v=([a-zA-Z0-9_-]{11})(&.*)?#?$/},{pos:2,re:/^(https?:\/\/)?youtu\.be\/([a-zA-Z0-9_-]{11})(\?.*)?#?$/}],a){t.next=8;break}return t.abrupt("return");case 8:(n=o.map(function(e){return e.re.test(a)?a.match(e.re)[e.pos]:null}).filter(function(e){return!!e})[0])?(console.log("Sending intent to download video "+n),Le.a.ajax({url:e.state.params.apiRoot+"/youtube-dl/",data:{v:n},type:"POST",headers:{Authorization:"Token "+e.state.params.authToken}}).done(function(e){return console.log("task id: "+e.task_id)}).fail(function(t){return e.onYoutubeFail(t,n)})):Me()("Error","Invalid Youtube URL","error");case 10:case"end":return t.stop()}},t)})),e.onYoutubeFail=function(t,a){401===t.status?e.clearAuthToken():Me()("Oops!","Youtube download "+a+" did not go through...","error")},e.onAjaxFail=function(t){if(401===t.status){var a=lt({},e.state.params,{authToken:null});e.setState({params:a})}},e.onRandomSongLoaded=function(t,a){var n=lt({},e.state.params,{currentAudio:{musicSrc:t.download_url+".mp3?auth_token="+e.state.params.authToken,singer:t.filename,cover:t.download_url+".jpg?auth_token="+e.state.params.authToken,name:t.filename.split("/").pop()},fetchingNext:!1});console.log("GOTCHA!!!"),e.setState({params:n})},e.playNext=function(){console.log("NEXT!!!");var t=lt({},e.state.params,{currentAudio:{musicSrc:""},playId:-1});e.setState({params:t}),e.state.params.fetchingNext||(e.fetchRandomSong(!0),console.log("FETCH!!!"))},e.playById=function(t,a,n){var o=lt({},e.state.params,{playId:n.id});e.setState({params:o})},e.onSearchPrompt=function(){var t=lt({},e.state.params,{showSearchModal:!e.state.params.showSearchModal});e.setState({params:t})},console.log(e.state.params.authToken),e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.state.params.authToken&&this.playNext()}},{key:"render",value:function(){var e=this,t=this.state.params,a=[o.a.createElement("span",Object.assign({key:"search",className:"group song-search"},Object(c.a)({},P()()?"onTouchStart":"onClick",this.onSearchPrompt.bind(this))),o.a.createElement(Oe.FaSearch,null)),o.a.createElement("span",Object.assign({key:"yt_dl",className:"group youtube-download"},Object(c.a)({},P()()?"onTouchStart":"onClick",this.onYoutubeDlPrompt.bind(this))),o.a.createElement(Oe.FaYoutube,null)),o.a.createElement("span",Object.assign({key:"signout",className:"group user-logout"},Object(c.a)({},P()()?"onTouchStart":"onClick",this.onLogout.bind(this))),o.a.createElement(Oe.FaSignOut,null))];return o.a.createElement("div",null,o.a.createElement("video",{poster:"/background.jpg",className:"bgVideo",playsInline:!0,autoPlay:!0,muted:!0,loop:!0},o.a.createElement("source",{src:"/background.av1.mp4",type:"video/mp4; codecs=av01.0.05M.08"}),o.a.createElement("source",{src:"/background.mp4",type:"video/mp4"}),o.a.createElement("source",{src:"/background.webm",type:"video/webm"})),o.a.createElement("div",{class:"videoCover"}),!t.authToken&&o.a.createElement("div",{id:"login"},o.a.createElement("form",{id:"loginForm",onSubmit:this.onLogin},o.a.createElement("div",{id:"usernameInputWrapper"},o.a.createElement("input",{type:"text",id:"username",placeholder:"Username"})),o.a.createElement("div",{id:"passwordInputWrapper"},o.a.createElement("input",{type:"password",id:"password",placeholder:"Password"})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit",id:"loginBtn"},o.a.createElement("i",{className:"fas fa-sign-in-alt fa-fw"})," Login")," ",o.a.createElement("small",null,"v2019081600")))),t.authToken&&o.a.createElement(ke,Object.assign({},t,{audioPrevAndNextBasePlayHandle:function(t){t&&e.playNext()},onAudioEnded:this.playNext,onAudioLoadError:function(t){t.errMsg&&e.playNext()},onAudioListsChange:this.playById,extendsContent:a})),t.showSearchModal&&o.a.createElement("div",{style:{marginBottom:"100px",position:"fixed",zIndex:1e3,left:"0",top:"5%",bottom:"5%",width:"100%",overflow:"auto"}},o.a.createElement("div",{style:{position:"relative",width:"90%",left:"5%"}},o.a.createElement(Te.a,{className:"searchTable",icons:ut,title:"Search Your Files",columns:[{title:"Title",field:"filename",type:"string",render:function(t){return o.a.createElement("span",{title:t.filename,onClick:function(){return e.onRandomSongLoaded(t)}},o.a.createElement("img",{style:{height:36,borderRadius:"50%",verticalAlign:"middle"},alt:"cover",src:t.download_url+".jpg?auth_token="+e.state.params.authToken})," ",t.filename.split("/").pop())}}],data:function(){var t=Object(u.a)(l.a.mark(function t(a){var n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Le.a.ajax({url:e.state.params.apiRoot+"/songs/",data:{q:a.search},method:"GET",dataType:"json",headers:{Authorization:"Token "+e.state.params.authToken}});case 2:return n=t.sent,t.abrupt("return",{data:n.slice(a.page*a.pageSize,(a.page+1)*a.pageSize),page:a.page,totalCount:n.length});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),actions:[{icon:Oe.FaPlayCircle,tooltip:"Play",onClick:function(t,a){return e.onRandomSongLoaded(a)}}]}))))}}]),t}(o.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},273:function(e,t,a){e.exports=a(1031)},278:function(e,t,a){}},[[273,1,2]]]);
//# sourceMappingURL=main.4db90823.chunk.js.map